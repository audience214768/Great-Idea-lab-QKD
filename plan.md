# 计算机伟大思想大作业-量子密钥计划

github仓库：https://github.com/audience214768/Great-Idea-lab-QKD#


- 了解量子密钥工作背景、工作原理和工作过程
- 实现量子密钥发送过程的代码模拟，分别模拟有/无窃听者的密钥发送过程（代码结构如下）
**具体分工**：谢家烨负责代码架构和main， 付长睿负责量子操作qubit的实现，任德厚负责三个角色德模拟实现
- 了解、探讨量子密钥相关的发展前景



## 代码结构
```
GREAT-IDEA-LAB-QKD/
├── src/
├── quantum_lib/        #量子相关功能
│   ├── Qubit.h
│   └── Qubit.cpp
├── actors/             #模拟密文发送过程的人员
│   ├── sender.h
│   ├── sender.cpp 
│   ├── receiver.h 
│   ├── receiver.cpp
│   ├── listener.h
│   └── listener.cpp
├── CMakeLists.txt
├── build
├── main.cpp            #实现总的模拟过程和展示
└── tests/              #测试
    └── test_quantum_lib.cpp
```

## 参考资料

- https://zhuanlan.zhihu.com/p/431826387 量子计算和密钥分发原理

## AI使用记录
>user：通俗地介绍一下量子密钥
 model：Model
好的，完全没问题！我们从零开始，用最通俗易懂的方式来理解量子密钥分发 (Quantum Key Distribution, QKD)。忘掉复杂的公式和术语，把它想象成一个极其聪明的情报传递游戏。
一、 故事的开端：情报员的千年难题
想象一下，有两个情报员，爱丽丝（Alice）和鲍勃（Bob），他们身处敌占区，需要通过一个可能会被窃听的电话线来商量一个秘密的行动计划。
在商量计划之前，他们必须先确定一个密钥（Key）。这个密钥就像一个密码本，比如“A=猴子，B=香蕉...”。只有拥有相同密钥的两人，才能听懂对方加密后的信息。
核心难题：如何才能安全地把这个密钥从Alice送到Bob手里？
派信使送？ 信使可能被抓，密钥泄露。
在电话里直接说？ 电话线可能被窃听者夏娃（Eve）监听，密钥直接泄露。
用数学加密（像RSA）？ 这依赖于数学难题，虽然目前安全，但理论上未来强大的计算机（比如量子计算机）可能破解。
几千年来，这都是一个无解的难题：只要信道可能被窃听，就不存在100%安全传递密钥的方法。
直到……量子力学登场了。
二、 量子世界的“游戏规则”——我们的魔法道具
量子密钥分发利用了微观粒子世界（比如光子）的一些奇特性质。我们不需要深入物理学，只需要记住三条神奇的“游戏规则”：
规则1：叠加态 (Superposition) - “旋转的硬币”
一个经典比特，就像一枚静止在桌上的硬币，要么是正面（0），要么是反面（1）。
一个量子比特（Qubit），就像一枚在空中飞速旋转的硬币。在它落地（被测量）之前，它既是正面也是反面，处于一种“叠加态”。
规则2：测量坍缩 (Measurement Collapse) - “拍扁硬币”
当你去“看”（测量）一个旋转中的硬币时，你必须用手把它拍在桌上。
在你拍下去的那一瞬间，它的旋转状态就消失了，“坍缩” 成了一个确定的结果：要么是正面，要么是反面。
关键：一旦坍缩，它就变回了普通的静止硬币，再也回不到旋转的状态了。测量行为本身，就不可逆地改变了它。
规则3：测量基 (Measurement Basis) - “不同的拍法”
这是最核心、最巧妙的一点！想象我们有两种“拍扁”旋转硬币的方法（测量基）：
方法A (“上下拍”)：用两只手掌上下合拢去拍。这种拍法能准确地告诉你硬币是“正面朝上”还是“反面朝上”。我们称之为直线基（+）。
方法B (“左右拍”)：用两只手掌左右合拢去拍。这种拍法能准确地告诉你硬币是“左边边缘朝上”还是“右边边缘朝上”。我们称之为对角基（x）。
现在，最神奇的事情发生了：
如果你用对的方法去拍：一个被设定为“正面朝上”的硬币，你用“上下拍”去测量，结果100% 会是“正面朝上”。
如果你用错的方法去拍：一个被设定为“正面朝上”的硬币，你却用“左右拍”去测量，会发生什么？硬币会被你的手拍歪！它的结果会变得完全随机，50% 的概率是“左边边缘朝上”，50% 的概率是“右边边缘朝上”。
总结一下魔法道具的用法：
我们可以把信息（0或1）编码在量子的状态上（比如“正面朝上”代表0）。
我们可以选择不同的“拍法”（基）来编码和测量。
“用错方法去拍，结果就全乱了”—— 这是我们抓住窃听者的关键武器！
三、 BB84游戏开始：Alice和Bob如何利用规则传递密钥
现在，Alice和Bob要利用这三条规则，在一个可能被Eve窃听的“量子信道”（比如一根光纤）上传递密钥。这个游戏协议就叫BB84。
第一步：Alice的随机发送
Alice想发送一串随机的密钥比特，比如 1 0 1 1 0。
她不直接发送 1 和 0，而是把它们编码成一个个量子比特（比如光子）。
对于每一个比特，她都随机地选择一种“拍法”（基）来编码：
她想发送的比特	她随机选的“拍法”（基）	她实际发出的量子状态（可以想象成光子的偏振）
1	直线基 (+)	垂直偏振 (`
0	对角基 (x)	45度偏振 (/)
1	对角基 (x)	135度偏振 (\)
1	直线基 (+)	垂直偏振 (`
0	直线基 (+)	水平偏振 (—)
然后，她把这一串精心编码的量子比特，一个一个地通过量子信道发给Bob。
第二步：Bob的随机测量
Bob收到了这些神秘的量子比特。他完全不知道Alice对每个比特用的是哪种“拍法”。所以，他也只能随机地为每个收到的比特选择一种“拍法”来测量。
Alice的发送	Bob的接收与测量	Bob的测量结果	“拍法”是否一致？
1 (用+基)	Bob随机选 x 基	随机得到 0 或 1 (比如0)	不一致
0 (用x基)	Bob随机选 x 基	准确得到 0	一致！
1 (用x基)	Bob随机选 + 基	随机得到 0 或 1 (比如0)	不一致
1 (用+基)	Bob随机选 + 基	准确得到 1	一致！
0 (用+基)	Bob随机选 x 基	随机得到 0 或 1 (比如1)	不一致
现在，Bob得到了一串测量结果：0 0 0 1 1。这串数字里，有些是准确的，有些是随机猜的。他自己也不知道哪些是对的。
第三步：公开对答案，但只对“拍法”
这是协议的点睛之笔。Alice和Bob通过一个普通的公开信道（可以被Eve窃听）通话。
Bob问：“嘿Alice，第一个比特你用的什么‘拍法’？”
Alice答：“我用的是直线基（+）。”
Bob：“哦，我用的是对角基（x），那这个结果不能要。”
Bob问：“第二个呢？”
Alice答：“对角基（x）。”
Bob：“太好了！我也是用的对角基（x）！这个结果我们保留。”
……
他们就这样，把自己对每一个比特使用的“拍法”公开告诉对方。
关键：他们只说“拍法”，绝对不说测量的结果是什么！ Eve就算听到了全部对话，也只知道他们用了什么方法，不知道他们得到了什么秘密。
第四步：筛选出最终密钥
Alice和Bob一起，丢掉所有两人“拍法”不一致的测量结果，只保留那些双方“拍法”一致的结果。
在我们的例子中，他们在第2位和第4位上使用了相同的“拍法”。
Alice在第2位发送的是 0。
Alice在第4位发送的是 1。
所以，他们最终得到的共享密钥就是：0 1。这个密钥是100%准确的，因为是在双方“拍法”一致的情况下得到的。
四、 窃听者Eve的困境：如何抓住她？
现在，假设Eve在信道中间窃听。她也必须拦截Alice发来的量子比特，然后测量，再把一个伪造的量子比特发给Bob。
但是，Eve和Bob一样，她也不知道Alice用的什么“拍法”！她也只能随机猜。
让我们来看其中一位比特会发生什么：
Alice 发送 1，用的是直线基 (+)。
Eve 拦截了。她倒霉，猜错了，用了对角基 (x) 去测量。
根据规则3，Eve的测量结果会是随机的（50%是0，50%是1）。假设她测到了0。
Eve的测量行为，已经不可逆地破坏了原始的量子状态！（规则2）
Eve 必须发一个东西给Bob，否则就会被发现。她只能根据自己测到的0，用她刚刚使用的对角基 (x)，重新编码一个量子比特发给Bob。
Bob 收到了Eve伪造的量子比特。他更倒霉，他这次随机选择的“拍法”恰好是直线基 (+)，和Alice最初用的一样！
但是，Bob现在测量的是一个被Eve用对角基 (x) 编码过的量子比特。Bob用直线基 (+) 去测量，根据规则3，他得到的结果又会是随机的！
看到了吗？Eve的窃听行为，就像在传递链条中引入了一个“噪声”源。
如何发现？
在第四步筛选完密钥后，Alice和Bob再多做一个安全检测：他们从筛选出的密钥（比如有100位）里，随机挑出20位，然后在公开电话里大声读出来对比。
如果没有Eve：因为他们的“拍法”是一致的，所以这20位应该一模一样。
如果有Eve：由于Eve的随机猜测和破坏，Bob测量的结果中会有相当一部分出错。当他们对比这20位时，就会发现有几位对不上！比如Alice是1，Bob却是0。
一旦发现错误，Alice和Bob就知道：“有内鬼，终止交易！” 他们会立刻丢弃这次生成的所有密钥，然后重来一次。
Eve的窘境：她想窃听，就必须测量；只要她测量，就必然会以一定的概率留下痕迹（引入错误）；只要有痕迹，就一定会被发现。
这就是量子密钥分发的安全性基础：它的安全性不是基于数学难题，而是基于物理定律。 窃听行为在物理上是无法隐藏的。